%%%%%%%%%%%%%%%%%%%%%%%%%%%% -*- Mode: latex -*- %%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% Copyright (c) 1991-2003 Francois Felix Ingrand.
%% All rights reserved.
%%
%% Redistribution and use in source and binary forms, with or without
%% modification, are permitted provided that the following conditions
%% are met:
%%
%%    - Redistributions of source code must retain the above copyright
%%      notice, this list of conditions and the following disclaimer.
%%    - Redistributions in binary form must reproduce the above
%%      copyright notice, this list of conditions and the following
%%      disclaimer in the documentation and/or other materials provided
%%      with the distribution.
%%
%% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
%% "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
%% LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
%% FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
%% COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
%% INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
%% BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
%% LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
%% CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
%% LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
%% ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
%% POSSIBILITY OF SUCH DAMAGE.
%%
%% $Id$
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\part{\XPK{}}
\node{X-OPRS Kernel}

\chapter*{Overview of the \XPK{}}
\node{Overview of the X-OPRS Kernel}
\cpindex{Overview of the \XPK{}}

The \XPK{} is an important program of the \COPRSDE{} pacopge: it has
all the characteristics of the \CPK{}, but better, it can execute OPs and
procedures (i.e. graphically trace them) under the X11 Window/Motif
interface.

\XPK{} is the X11/Motif version of the \CPK{}. It is functionally identical to
the \CPK{}, but allow the user to graphically follow the execution of the
procedures, as well as the evolution of the tasks graph.  Using the graphical
user interface, one have access to the underlying
\CPK{} to perform the following operations:

\begin{itemize}

\item To graphically follow the execution of selected procedures

\item To graphically follow the evolution of  the current tasks of the
system,

\item To select the procedure to be traced,

\item To consult the database,

\item To stop and resume the execution of the kernel, or to execute step
by step some selected procedures,

\item To establish new goals or to conclude new facts in the database

\item To select the various operations of the kernel to be traced,

\item To select the run-time options of the kernel,

\item To load new procedures or new databases,

\item To access an on-line help and documentation.

\end{itemize}

You can call this program directly from an Unix shell or you can call it
directly from the \OPRSS{} when you execute the \code{make-x} command, or
with the \code{make} command when the \OPRSS{} has been started with the
\code{-X} argument (\pxref{Arguments of the OPRS-Server}). 

\XPK{} contains the \CPK{}. In fact, the kernel part of
\XOPRS{} is the \CPK{}. The \COPRS{} main loop is running interleaved
with the Xt Application Main Loop. Note that the \CPK{} has better
performance than its X11 counterpart (because of the absence of the Xt
Application Main Loop). Any performance study should be made with the
\CPK{} alone (except, of course, if the goal is to evaluate the
performance of the X interface).

One interesting feature of the \XPK{} is that you can interact with the kernel
more easily than with the \CPK{}. With the \CPK{} you can only interact with
the help of the \OPRSS{} or by connecting to the \COPRS{} itself. With the
\XPK{} however, the Xt Main Loop, which runs interleaved with the \COPRS{} main
loop, allows you to do ``asynchronous'' operations with the running kernel.
Therefore, it is not necessary (nor is it permitted) to \code{connect}
(\pxref{Commands of the OPRS-Server}) to a \XPK{}.

There is another program, \code{oprs-cat}, which runs when you run
an \XPK{}. Its goal is to echo on its \code{stdout} whatever is sent on
its \code{stdin}\dots{} This is used internally by \XOPRS{} to display text
trace in the Text Trace Pane. 

\chapter{How to Use the \XPK{}}
\node{How to Use the X-OPRS Kernel}
\cpindex{How to Use the \XPK{}}
\cpindex{How to Start the \XPK{}}

The \XPK{} is used exactly as its tty version, the \CPK{} (\pxref{How to Use the OPRS Kernel}), and the argument available are the same (\pxref{Arguments to the oprs Command}). Note however that a number of Xt arguments are available
and can be used by the user (\pxref{Xt Command Line Arguments}). Moreover,
there are a number of specific arguments to the \XPK{} which we now introduce.

\begin{description}

\item[\code{-log filename}] can be used to log in the file \file{filename} all
the outputs produced by the kernel and appearing in the text window.

\item[\code{-pwt}] can be used to print the \XPK{} widget tree (\pxref{X-OPRS Motif Widgets Hierarchy}) . This can be useful if you do not have the
documentation at hand and still want to now the name or type of a particular
widget.

\item[\code{-peo}] can be used to print the temporal operator in English
instead of the single letter. It will print \code{achieve} instead of \samp{!},
and \code{wait} instead of \samp{\^{}} and so on. This is equivalent to the
\code{-p} argument of the \CPK{}.

\end{description}

Various commands can be used to control the execution of the \XPK{}.
These commands are grouped into two sets: the ``Menubar'' and the ``Control
and Status Panel''.



\section{\XPK{} Environment Variables}
\node{X-OPRS Kernel Environment Variables}
\cpindex{X-OPRS Kernel Environment Variables}

There are a number of environment variables which can be used to customize the
\XPK{} or to define default arguments. Arguments passed using the command line
have precedence on those acquired from environment variables.

\begin{description}

\cpindex{OPRS\_DATA\_PATH}
\item[\code{OPRS\_DATA\_PATH}] is used  to specify a data path, i.e. a colon separated
list of directories where the kernel will look for data files (\file{.inc},
\file{.opf} and \file{.db}). It is used by the \CPK{} and the \XPK{}. It is
equivalent to the \code{-d} command line argument.\*
Example:
\begin{verbatim}
setenv OPRS_DATA_PATH ./data:/usr/local/oprs/data:${HOME}/data
\end{verbatim}

\cpindex{OPRS\_DOC\_DIR}
\item[\code{OPRS\_DOC\_DIR}] is used  to specify the location of the online \COPRSDE{}
documentation. It is used by the \XPK{} and the \OPE{}.
Example:
\begin{verbatim}
setenv OPRS_DOC_DIR /usr/local/oprs/doc
\end{verbatim}

\cpindex{OPRS\_MP\_PORT}
\item[\code{OPRS\_MP\_PORT}] is used  to specify the port on which the \MP{} will listen
to connection. It is used by the \CPK{}, the \XPK{}, the \OPRSS{} and the
\MP{}. It is equivalent to the \code{-j} command line argument.
Example:
\begin{verbatim}
setenv OPRS_MP_PORT 3456
\end{verbatim}

\cpindex{OPRS\_MP\_HOST}
\item[\code{OPRS\_MP\_HOST}] is used  to specify the host on which the \MP{} will
listen to connection. It is used by the \CPK{}, the \XPK{} and the
\OPRSS{}.  It is equivalent to the \code{-m} command line argument.
Example:
\begin{verbatim}
setenv OPRS_MP_HOST machine.site.domain
\end{verbatim}

\cpindex{OPRS\_SERVER\_PORT}
\item[\code{OPRS\_SERVER\_PORT}] is used  to specify the port on which the
\OPRSS{} will listen to connection. It is used by the \CPK{}, the \XPK{}
and the \OPRSS{}.  It is equivalent to the \code{-i} command line argument.
Example:
\begin{verbatim}
setenv OPRS_SERVER_PORT 3457
\end{verbatim}

\cpindex{OPRS\_SERVER\_HOST}
\item[\code{OPRS\_SERVER\_HOST}] is used  to specify the host on which the
\OPRSS{} will listen to connection. It is used by the \CPK{} and the
\XPK{}. It is equivalent to the \code{-s} command line argument.
Example:
\begin{verbatim}
setenv OPRS_SERVER_HOST machine.site.domain
\end{verbatim}

\cpindex{OPRS\_ID\_CASE}
\item[\code{OPRS\_ID\_CASE}] is used to specify if the program should upper case,
lower case or should not change the case of the parsed Id. This is equivalent
to the \code{-l} option. The possible values
are \code{lower}, \code{upper} or \code{none}:\*
Example:
\begin{verbatim}
setenv OPRS_ID_CASE none
\end{verbatim}

\end{description}

\section{Windows and Panes of the \XPK{}}
\node{Windows and Panes of the X-OPRS Kernel}
\cpindex{Windows and Panes of the \XPK{}}
\cpindex{Panes of the \XPK{}}
\cpindex{Windows of the \XPK{}}

\figuregif[height=0.5\textheight]{xoprs-window}{\XOPRS{} Window}{XOPRS Window}

As shown on Figure \ref{XOPRS Window}, panes and menus are present in the
default \XOPRS{} configuration. The different menus and control panels are
explained in the \nxref{Menubar}, and in the \nxref{Control and Status Panel}.



\subsection{Text Pane}
\node{Text Pane}
\cpindex{Text Pane}

This pane is located on the upper left part of the \XOPRS{} frame.  It is used
for any Text output. The outputs can be generated either by selected trace, or
by the \CPK{} itself. This pane does not accept any input. The text contained
in this pane is scrollable and previous output can be re displayed using the
scroll bars. However, for memory allocation reasons, the size of the buffer
corresponding to this text is limited but can be changed by the user
(\pxref{Change Size Text Pane}).

\subsection{Graphic OP Pane}
\node{Graphic OP Pane}
\cpindex{Graphic OP Pane}

This pane is used to display the tracing of executing OPs when the
appropriate trace flags are on. It can also be used to display a particular
OP (\pxref{Display Menu}). The user can use the scroll bars to change the
view port of this pane. He can also click on and drag the window himself to
move the view port around.

In this pane, if you left click on a goal, or an invocation part, or an effect
part, the \XPK{} will propose a list of relevant OP (among the OP currently
loaded in the \XPK{}). This is very convenient to jump from one OP to the OPs
which may achieve a similar goal or which may achieve a subgoal of this procedure.

\subsection{Graphic Intention Pane}
\node{Graphic Intention Pane}
\cpindex{Graphic Intention Pane}

This pane is used to display the tracing of Intentions and Tasks when the
appropriate trace flags are on. The user can use the scroll bars to change
the view port of this pane. He can also click on the window himself to move
the view port around.

\figuregif[scale=0.5]{xoprs-int-trace}{Specific Intention Trace Window}{xps-int-trace}

If you right click on an intention in the intention graph a window displaying
the traces (OP text traces, OP success and failures, etc) specific to this
intention will appear (as shown on Figure \ref{xps-int-trace}).

\figuregif[scale=0.5]{xoprs-show-intention}{Show Intention Dialog Box}{show-intention}

If you middle click on an intention a Text Window Dialog Box is poped up and
contains the status of the selected intention (see Figure
\ref{show-intention}). This dialog box is not modal and has an Update button
which can be used to update the window to display the current intention graph.

\section{Menubar}
\node{Menubar}
\cpindex{Menubar}
\cpindex{Menu}

\figuregif[scale=0.5]{xoprs-menu-bar}{\XOPRS{} Menu Bar}{xp-menu-bar}

The Menu Bar (Figure \ref{xp-menu-bar}) contains different buttons from which
cascade menus pop when they are selected with the mouse.



\subsection{File Menu}
\node{File Menu}
\cpindex{File Menu}

\figuregif[scale=0.5]{xoprs-file-menu}{\XOPRS{} File Menu}{xp-file-menu}

The File menu (Figure \ref{xp-file-menu}) contains all the commands dealing
with files. Most of these commands have their counterpart in the \CPK{}
(\pxref{OPRS Kernel Commands}).



\subsubsection{Include}
\node{Include}
\cpindex{Include}

This command is used to load an include file. The default (and recommended)
extension for these files is \file{.inc} (\pxref{Include File Format}). When
this command is selected, a file selection dialog box appears to allow the user
to select the include file to load. This command is equivalent to the
\code{include} command of the \CPK{} (\pxref{OPRS Kernel Loading Commands}).

\subsubsection{Load Database}
\node{Load Database}
\cpindex{Load Database}

This command is used to load a database file. The default (and recommended)
extension for these files is \file{.db} (\pxref{Database File Format}). When this
command is selected, a file selection dialog box appears to allow the user to
select the database file to load. This command is equivalent to the
\code{load db} command of the \CPK{} (\pxref{OPRS Kernel Loading Commands}).
The kernel database can be emptied with the ``Empty Fact Database'' command
(\pxref{OPRS Menu}).

\subsubsection{X-OPRS Load OP File}
\node{X-OPRS Load OP File}
\cpindex{X-OPRS Load OP File}

This command is used to load a OP File, in OPF format (\pxref{OPF Format}). The
default (and recommended) extension for these files is \file{.opf} . When this
command is selected, a file selection dialog box appears to enable the user to
select the OP file to load. This command is equivalent to the
\code{load opf} command of the \CPK{} (\pxref{OPRS Kernel Loading Commands}).  The kernel OP Library can be emptied with the ``Empty OP
Database'' command (\pxref{OPRS Menu}).

\subsubsection{Load Dump Database}
\node{Load Dump Database}
\cpindex{Load Dump Database}

This command is used to load dump database file. The default (and recommended)
extension for these files is \file{.ddb}. When this command is selected, a file
selection dialog box appears to allow the user to select the database file to
load. This command is equivalent to the \code{load dump db} command of the
\CPK{} (\pxref{OPRS Kernel Dumping/Loading Commands}). 

\subsubsection{Load Dump OP}
\node{Load Dump OP}
\cpindex{Load Dump OP}

This command is used to load a dump OP File. The default (and recommended)
extension for these files is \file{.dopf} . When this command is selected, a
file selection dialog box appears to enable the user to select the OP file to
load. This command is equivalent to the \code{load dump op} command of the
\CPK{} (\pxref{OPRS Kernel Dumping/Loading Commands}).

\subsubsection{Load Dump Kernel}
\node{Load Dump Kernel}
\cpindex{Load Dump Kernel}

This command is used to load a dump kernel File. The default (and recommended)
extension for these files is \file{.dkrn} . When this command is selected, a
file selection dialog box appears to enable the user to select the kernel file
to load. This command is equivalent to the \code{load dump kernel} command of
the \CPK{} (\pxref{OPRS Kernel Dumping/Loading Commands}).

\subsubsection{List Loaded OP Files}
\node{List Loaded OP Files}
\cpindex{List Loaded OP Files}

This command is used to list all the OP File loaded
in the \XPK{}. This command is equivalent to the \code{list\_opfs} command
of the \CPK{} (\pxref{OPRS Kernel OP Library Commands}).

\subsubsection{Reload OP File}
\node{Reload OP File}
\cpindex{Reload OP File}

\figuregif[scale=0.5]{xoprs-reload-opf}{Reload OP File Dialog List}{reload-opf}

This command is used to reload a OP File, in OPF format (\pxref{OPF Format}). The default (and recommended) extension for these files is
\file{.opf} . When this command is selected, a selection dialog with the list
of load OP file appears to enable the user to select the OP file to
reload (Figure \ref{reload-opf}). This command is equivalent to the \code{reload opf} command of the
\CPK{} (\pxref{OPRS Kernel Loading Commands}).

\subsubsection{\XOPRS{} Unload OP File}
\node{X-OPRS Unload OP File}
\cpindex{X-OPRS Unload OP File}

\figuregif[scale=0.5]{xoprs-unload-opf}{Unload OP File Dialog List}{unload-opf}

This command is used to unload a OP File. When this command is selected, a
dialog box displaying all the OP Files currently loaded in the kernel appears
to enable the user to select the OP file to unload (see Figure
\ref{unload-opf}). This command is equivalent to the \code{unload\_opf} command
of the \CPK{} (\pxref{OPRS Kernel OP Library Commands}).  The kernel
OP Library can be emptied with the ``Empty OP Library'' command (\pxref{OPRS Menu}).

\subsubsection{Save Database}
\node{Save Database}
\cpindex{Save Database}

This command is used to save the current state of the database in a file. The
default (and recommended) extension for this file is \file{.db} . When this
command is selected, a file selection dialog box appears to allow the user to
select the database file to use. This command is equivalent to the
\code{save db} command of the \CPK{} (\pxref{OPRS Kernel Database Commands}).

\subsubsection{Dump Database}
\node{Dump Database}
\cpindex{Dump Database}

This command is used to dump the database in a file. The default (and
recommended) extension for these files is \file{.ddb}. When this command is
selected, a file selection dialog box appears to allow the user to select the
file in which to dump the database. This command is equivalent to the
\code{dump db} command of the \CPK{} (\pxref{OPRS Kernel Dumping/Loading Commands}). 

\subsubsection{Dump OP}
\node{Dump OP}
\cpindex{Dump OP}

This command is used to a dump the op library in a file. The default (and
recommended) extension for these files is \file{.dopf} . When this command is
selected, a file selection dialog box appears to enable the user to select the
file in which to dump the OP library. This command is equivalent to the
\code{dump op} command of the \CPK{} (\pxref{OPRS Kernel Dumping/Loading Commands}).

\subsubsection{Dump Kernel}
\node{Dump Kernel}
\cpindex{Dump Kernel}

This command is used to a dump the kernel in a file. The default (and
recommended) extension for these files is \file{.dkrn} . When this command is
selected, a file selection dialog box appears to enable the user to select the
file in which to dump the kernel. This command is equivalent to the \code{dump
kernel} command of the \CPK{}
 (\pxref{OPRS Kernel Dumping/Loading Commands}).

\subsubsection{\XOPRS{} Quit}
\node{X-OPRS Quit}
\cpindex{X-OPRS Quit}

\figuregif[scale=0.5]{xoprs-quit}{Quit Dialog Box}{quit-dialog}

This command is used when you want to quit the \XPK{}.  You are asked to
confirm that you want to quit (see Figure \ref{quit-dialog}). This command is
equivalent to the \code{q|quit|exit|EOF} command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}). Quitting the \XPK{} will execute the
\code{end\_kernel\_user\_hook} function (\pxref{Advanced Features}).

\subsection{OPRS Menu}
\node{OPRS Menu}
\cpindex{OPRS Menu}

\figuregif[scale=0.5]{xoprs-oprs-menu}{\XOPRS{} Oprs Menu}{xp-oprs-menu}

This menu (Figure \ref{xp-oprs-menu}) contains a number of commands to deal with the running
\XPK{}.



\subsubsection{Add Fact or Goal}
\node{Add Fact or Goal}
\cpindex{Add Fact or Goal}

\figuregif[scale=0.5]{xoprs-fact-goal}{Add Fact or Goal Prompt Dialog}{add-fact-goal}

This command is used to add a fact or a goal to the running \XPK{}.  When this
command is selected, a prompt dialog box appears to enable the user to enter
the fact or the goal to add (see Figure \ref{add-fact-goal}). This command is
equivalent to the \code{add goal|fact} command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}). If you want to enter more than one fact or
goal in the same \CPK{} loop, you can halt the kernel (with the ``Halt''
button), call this menu a number of time and then restart it.

Moreover, this command can be used to conclude a fact in the database.
However, it is not purely equivalent to the \code{conclude
\var{expression}} of the \CPK{}: the \code{add fact} leads
to some OP executions if they are applicable, while the \code{conclude}
command only concludes the fact in the database.

\subsubsection{Conclude Fact Database}
\node{Conclude Fact Database}
\cpindex{Conclude Fact Database}

\figuregif[scale=0.5]{xoprs-conclude-db}{Conclude Database Dialog Box}{conclude-db}

This command is used to conclude a expression in the running \XPK{}.  When this
command is selected, a Prompt dialog box appears to enable the user to enter
the expression to conclude (see Figure \ref{conclude-db}). This command is
equivalent to the \code{conclude \var{expression}} command of the \CPK{}
(\pxref{OPRS Kernel Database Commands}).

\subsubsection{Delete Fact Database}
\node{Delete Fact Database}
\cpindex{Delete Fact Database}

\figuregif[scale=0.5]{xoprs-delete-db}{Delete Database Dialog Box}{delete-db}

This command is used to delete a gexpression in the running \XPK{}.  When this
command is selected, a Prompt dialog box appears to enable the user to enter
the gexpression to delete (see Figure \ref{delete-db}). This command is
equivalent to the \code{delete \var{gexpression}} command of the \CPK{}
(\pxref{OPRS Kernel Database Commands}).

\subsubsection{Delete a OP}
\node{Delete a OP}
\cpindex{Delete a OP}

\figuregif[scale=0.5]{xoprs-delete-op}{Delete OP Dialog Box }{delete-op}

This command can be used to delete a particular OP from the kernel. When
selected, a dialog box (see Figure \ref{delete-op}) appears on the screen with
the list of the OP currently loaded. You can then select the one you want to
delete. It is not recommended to do this while the \XPK{} is running,
particularly if it is executing the OP you are deleting.

\subsubsection{Empty Fact Database}
\node{Empty Fact Database}
\cpindex{Empty Fact Database}

This command is used to clear the entire fact database. It is
equivalent to the \code{empty fact db} command of the \CPK{}
(\pxref{OPRS Kernel Loading Commands}).

\subsubsection{Empty OP Library}
\node{Empty OP Library}
\cpindex{Empty OP Library}

This command is used to clear the OP Library. It is
equivalent to the \code{empty\_op} command of the \CPK{}
(\pxref{OPRS Kernel Loading Commands}). This command should not be used
while the kernel is executing some OPs.

\subsection{Inspect Menu}
\node{Inspect Menu}
\cpindex{Inspect Menu}

\figuregif[scale=0.5]{xoprs-inspect-menu}{\XOPRS{} Inspect Menu}{xp-inspect-menu}

This menu (Figure \ref{xp-inspect-menu}) contains a number of commands to
inspect the running \XPK{}.



\subsubsection{Show Database}
\node{Show Database}
\cpindex{Show Database}

\figuregif[scale=0.5]{xoprs-show-database}{Show Database Dialog Box}{show-db}

This command is used to show the database content. It is equivalent to the
\code{show db} command of the \CPK{} (\pxref{OPRS Kernel Database Commands}). When this command is selected a Text Window Dialog Box is poped up
and contains the current database content (sorted alphanumericaly) (see Figure
\ref{show-db}). This dialog box is not modal and has an Update button which can
be used to update the window to display the current content of the database.

\subsubsection{Show Global Variables}
\node{Show Global Variables}
\cpindex{Show Global Variables}

This command is used to show the global variables. It is equivalent to the
\code{show variable} command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).

\subsubsection{Show Intentions}
\node{Show Intentions}
\cpindex{Show Intentions}

\figuregif[scale=0.5]{xoprs-show-intentions}{Show Intentions Dialog Box}{show-intentions}

Display all the intentions, if any, with lot of information on the status of
their thread, etc. This command is equivalent to the \code{show intention}
command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).  When this
command is selected a Text Window Dialog Box is poped up and contains the
current intention graph (see Figure \ref{show-intentions}). This dialog box is
not modal and has an Update button which can be used to update the window to
display the current intention graph..

\subsubsection{Show Conditions}
\node{Show Conditions}
\cpindex{Show Conditions}

\figuregif[scale=0.5]{xoprs-show-conditions}{Show Conditions Dialog Box}{show-conditions}

Display all the conditions, if any, with lot of information on the status of
their thread, etc. This command is equivalent to the \code{show condition}
command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).  When this
command is selected a Text Window Dialog Box is poped up and contains the
current condition. graph (see Figure \ref{show-conditions}). This dialog box is
not modal and has an Update button which can be used to update the window to
display the current intention graph..

\subsubsection{Show Memory Usage}
\node{Show Memory Usage}
\cpindex{Show Memory Usage}

This command is used to show the memory usage. It is equivalent to the
\code{show memory} command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).

\subsubsection{Consult Fact Database}
\node{Consult Fact Database}
\cpindex{Consult Fact Database}

\figuregif[scale=0.5]{xoprs-consult-db}{Consult Database Dialog Box}{consult-db}

This command is used to consult a gexpression in the running \XPK{}.  When this
command is selected, a Prompt dialog box appears to enable the user to enter
the gexpression to consult (see Figure \ref{consult-db}). The result appears in
the text window. This command is equivalent to the \code{consult
\var{gexpression}} command of the \CPK{} (\pxref{OPRS Kernel Database Commands}).

\subsubsection{Consult Relevant OP}
\node{Consult Relevant OP}
\cpindex{Consult Relevant OP}

This command is used to find out which OPs are relevant for a fact or a goal.
When this command is selected, a prompt dialog box appears to enable the user
to enter the fact or the goal to consult. The result appears in the text
window. This command is equivalent to the \code{consult relevant op fact|goal}
command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}). 

\subsubsection{Consult Applicable OP}
\node{Consult Applicable OP}
\cpindex{Consult Applicable OP}

This command is used to find out which OPs are applicable for a fact or a goal.
When this command is selected, a prompt dialog box appears to enable the user
to enter the fact or the goal to consult. The result appears in the text
window. This command is equivalent to the \code{consult applicable op
fact|goal} command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).


\subsubsection{List All}
\node{List All}
\cpindex{List All}

List all sort of information about this kernel (actions, evaluable functions,
predicates, etc).  It is equivalent to the
\code{list all} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\subsubsection{List Submenu}
\node{List Submenu}
\cpindex{List Submenu}

\figuregif[scale=0.5]{xoprs-inspect-list-menu}{\XOPRS{} Inspect List Menu}{xp-inspect-list-menu}

This command brings a submenu with the following commands:

\paragraph{List Predicate}
\node{List Predicate}
\cpindex{List Predicate}

This command will list the Predicate. It is equivalent to the \code{list
predicate} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\paragraph{List Evaluable Predicate}
\node{List Evaluable Predicate}
\cpindex{List Evaluable Predicate}

This command will list the Evaluable Predicate. It is equivalent to the
\code{list evaluable predicate} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}). 

\paragraph{List Closed World Predicate}
\node{List Closed World Predicate}
\cpindex{List Closed World Predicate}

This command will list the Closed World Predicate. It is equivalent to the
\code{list cwp} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}). 

\paragraph{List Functional Fact Predicate}
\node{List Functional Fact Predicate}
\cpindex{List Functional Fact Predicate}

This command will list the Functional Fact Predicate. It is equivalent to the \code{list ff}
command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\paragraph{List Basic Event Predicate}
\node{List Basic Event Predicate}
\cpindex{List Basic Event Predicate}

This command will list the Basic Event Predicate. It is equivalent to the
\code{list be} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}). 

\paragraph{List OP Predicate}
\node{List OP Predicate}
\cpindex{List OP Predicate}

This command will list the OP Predicate. It is equivalent to the \code{list op
predicate} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\paragraph{List Function}
\node{List Function}
\cpindex{List Function}

This command will list the Function. It is equivalent to the \code{list
function} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\paragraph{List Evaluable Function}
\node{List Evaluable Function}
\cpindex{List Evaluable Function}

This command will list the Evaluable Function. It is equivalent to the
\code{list evaluable function} command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}). 

\paragraph{List Action}
\node{List Action}
\cpindex{List Action}

This command will list the Actions. It is equivalent to the \code{list Action}
command of the \CPK{} (\pxref{OPRS Kernel Listing Commands}).

\subsubsection{List Loaded OPs}
\node{List Loaded OPs}
\cpindex{List Loaded OPs}

This command is used to list all the OPs loaded
in the \XPK{}. This command is equivalent to the \code{list\_ops} command
of the \CPK{} (\pxref{OPRS Kernel OP Library Commands}).

\subsubsection{Stat Database Hashtables}
\node{Stat Database Hashtables}
\cpindex{Stat Database Hashtables}

This command is used to find out the state of the database hashtables.
This command is equivalent to the \code{stat db}
command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).

\subsubsection{Stat Symbol Hashtable}
\node{Stat Symbol Hashtable}
\cpindex{Stat Symbol Hashtable}

This command is used to find out the state of the Symbol hashtable.
This command is equivalent to the \code{stat id}
command of the \CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).

\subsubsection{Stat All Hashtables}
\node{Stat All Hashtables}
\cpindex{Stat All Hashtables}

This command is used to find out the state of all the hashtables of the
kernel.  This command is equivalent to the \code{stat all} command of the
\CPK{} (\pxref{OPRS Kernel Miscellaneous Commands}).

\subsection{Trace Menu}
\node{Trace Menu}
\cpindex{Trace Menu}
\cpindex{Trace}

\figuregif[scale=0.5]{xoprs-trace-menu}{\XOPRS{} Trace Menu}{xp-trace-menu}

The trace menu (Figure \ref{xp-trace-menu}) contains all the commands which
allow the user to set various traces in the \XPK{}.



\subsubsection{OPRS Trace}
\node{OPRS Trace}
\cpindex{OPRS Trace}

\figuregif[scale=0.5]{xoprs-trace}{\XOPRS{} Trace Dialog Box}{XOPRS Trace}

When this menu is selected, a menu options dialog box appears for the user
to set or unset various trace options (see Figure \ref{XOPRS Trace}). Most of
these trace options have their pending flag in the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\begin{description}

\item[Goal Posting] Turn on or off information on the goal posted in
the kernel. This command is equivalent to the \code{trace goal on|off}
command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Fact Posting] Turn on or off information on facts posted in
the kernel. This command is equivalent to the \code{trace fact on|off}
command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Conclude from Parser] Turn on or off information on expression concluded
in the kernel. This command is equivalent to the \code{trace conclude on|off}
command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Message Reception] Turn on or off information on messages
received by the kernel. This command is equivalent to the \code{trace
receive on|off} command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Message Sent] Turn on or off information on messages sent by
the kernel. This command is equivalent to the \code{trace send on|off}
command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Database] Turn on or off trace on database operations. This
command is equivalent to the \code{trace db on|off} command of the \CPK{}
(\pxref{OPRS Kernel Trace Commands}).

\item[Database Frame] Turn on or off the printing of the frames while
printing the result of a consultation. This command is equivalent to the
\code{trace db frame on|off} command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[OP Success Failure] Turn on or off information on the success
or failure of OPs. This command is equivalent to the \code{trace suc\_fail
on|off} command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Intention Failure] Turn on or off information on the failure of
Intentions. This command is equivalent to the \code{trace intention failure
on|off} command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Intention Graphic] Turn on or off graphic trace on the
intention operation in the kernel.

\item[Intention] Turn on or off information on the intention
operation in the kernel. This command is equivalent to the \code{trace
intend on|off} command of the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[OP Compiler] Turn on or off information on the compilation of
OPs. This command is equivalent to the \code{trace load op on|off} command of
the \CPK{} (\pxref{OPRS Kernel Trace Commands}). (very verbose)

\item[Relevant OP] Turn on or off information on relevant OPs. This
command is equivalent to the \code{trace relevant op on|off} command of the \COPRS{}
kernel (\pxref{OPRS Kernel Trace Commands}). (quite verbose)

\item[Soak] Turn on or off information on the set of applicable OPs.
This command is equivalent to the \code{trace applicable op on|off} command of
the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[OP Graphic] Turn on or off graphic traces on executing OPs. This command
is equivalent to the \code{trace graphic on|off} command of 
the \CPK{} (\pxref{OPRS Kernel Trace Commands}).


\item[OP Text] Turn on or off text traces on executing OPs. This command
is equivalent to the \code{trace text on|off} command of 
the \CPK{} (\pxref{OPRS Kernel Trace Commands}).

\item[Thread Forking/Joining] Turn on or off information on thread creation and
merging. This command is equivalent to the \code{trace thread on|off} command of the
\CPK{} (\pxref{OPRS Kernel Trace Commands}).

\end{description}

\subsubsection{OP Trace/Step}
\node{OP Trace/Step}
\cpindex{OP Trace/Step}

\figuregif[scale=0.5]{xoprs-graphic-trace}{OP Graphic List Dialog}{trace-graphic-op}


This menu pops up list dialog boxes of all the OPs loaded in the \XOPRS{} kernel
(see Figure \ref{trace-graphic-op}). You can then select or unselect the OPs
for which you want tracing (Text trace or Graphic trace) and stepping (with the
Next command) enabled. The radio buttons are used to select the status
displayed, and the status which will be applied to the selected OPs if you
select OK or Apply. The Both buttons select both graphic and text trace. The
all button select the two trace (graphic and text) and enable the OP steping.

As for the trace, the corresponding \code{OP Graphic} and/or \code{Text
Graphic} option of the OPRS Trace option menu has to be on for the trace to be
displayed.

You can also use the \code{trace graphic op}, \code{trace graphic opf} and
\code{trace step opf} command describe in \nxref{OPRS Kernel OP Library Commands}.

\subsection{Option Menu}
\node{Option Menu}
\cpindex{Option Menu}

\figuregif[scale=0.5]{xoprs-option-menu}{\XOPRS{} Option Menu}{xp-option-menu}

The option menu (Figure \ref{xp-option-menu}) contains all the commands which
allow the user to set various options in the \XPK{}.



\subsubsection{OPRS Run Option}
\node{OPRS Run Option}
\cpindex{OPRS Menu Run Option}

\figuregif[scale=0.5]{xoprs-run-option}{\XOPRS{} Run Option Dialog Box}{XOPRS Run Option}

When this menu is selected, a run menu options dialog box appears for the user
to set or unset various options (see Figure \ref{XOPRS Run Option}). Most of
these options have their pending flag in the \CPK{} (\pxref{OPRS Kernel Run Option Commands}).

\begin{description}

\item[Eval On Post] Turn on or off the current-quote mechanism
(\pxref{Current and Quote}). This command is equivalent to the \code{set
eval\_on\_post on|off} command of the \CPK{} (\pxref{OPRS Kernel Run Option Commands}).

\item[Parallel Goal Posting] Turn on or off the parallel posting of goals. When
this option is on, one goal for each thread active in the current intention
will be posted (\pxref{New Traces and New Options}). This command is
equivalent to the \code{set parallel post on|off} command of the \CPK{}
(\pxref{OPRS Kernel Run Option Commands}).

\item[Parallel Intend] Turn on or off the parallel intending of OP instance.
When this option is \code{ON}, all the OP Instances found in the
\code{PREVIOUS\_SOAK} (\pxref{OPRS Kernel Main Loop}) are intended
(\pxref{New Traces and New Options}). This command is equivalent to the \code{set
parallel intend on|off} command of the \CPK{} (\pxref{OPRS Kernel Run Option Commands}). 

\item[Parallel Intention Execution] Turn on or off the parallel execution of
all the intention root of the intention graph. \xref{New Traces and New Options}. This command is equivalent to the \code{set parallel intention
on|off} command of the \CPK{} (\pxref{OPRS Kernel Run Option Commands}).

\item[Time Stamping] Turn on or off the time stamping in the kernel of various
date (fact creation, goal creation, etc). This command is equivalent to the
\code{set time\_stamping on|off} command of the \CPK{} (\pxref{OPRS Kernel Run Option Commands}). 

\end{description}

\subsubsection{OPRS Compiler/Parser Option}
\node{OPRS Compiler/Parser Option}
\cpindex{OPRS Menu Compiler/Parser Option}

\figuregif[scale=0.5]{xoprs-compiler-option}{\XOPRS{} Compiler/Parser Option Dialog Box}{XOPRS Compiler/Parser Option}

When this menu is selected, a menu options dialog box appears for the user to
set or unset various options (see Figure \ref{XOPRS Compiler/Parser Option}). Most of these
options have their pending flag in the \CPK{} (\pxref{OPRS Kernel Compiler/Parser Option Commands}).

\begin{description}

\item[Compiler Check Action] Turn on or off action checking in the
OP Compiler. \xref{Action Checking} for more information. This command is
equivalent to the \code{set action on|off} command of the \CPK{}
(\pxref{OPRS Kernel Compiler/Parser Option Commands}).

\item[Compiler Check Function] Turn on or off function checking in the
OP Compiler. \xref{Function Checking} for more information. This command is
equivalent to the \code{set function on|off} command of the \CPK{}
(\pxref{OPRS Kernel Compiler/Parser Option Commands}).

\item[Compiler Check Predicate] Turn on or off predicate checking in the
OP Compiler. \xref{Predicate Checking} for more information. This command is
equivalent to the \code{set predicate on|off} command of the \CPK{}
(\pxref{OPRS Kernel Compiler/Parser Option Commands}).

\item[Compiler Check Symbol] Turn on or off symbol checking in the
OP Compiler. \xref{Symbol Checking} for more information. This command is
equivalent to the \code{set symbol on|off} command of the \CPK{}
(\pxref{OPRS Kernel Compiler/Parser Option Commands}).

\end{description}

\subsubsection{OPRS Meta Level Option}
\node{OPRS Meta Level Option}
\cpindex{OPRS Menu Meta Level Option}

\figuregif[scale=0.5]{xoprs-meta-option}{\XOPRS{} Meta Level Option Dialog Box}{XOPRS Meta Level Option}

When this menu is selected, a menu options dialog box appears for the user to
set or unset various options (see Figure \ref{XOPRS Meta Level Option}). Most of these
options have their pending flag in the \CPK{} (\pxref{OPRS Kernel Meta Level Option Commands}).

\begin{description}

\item[Meta Level] Turn on or off the metalevel mechanism, which
greatly increases the performance of the system. This command is
equivalent to the \code{set meta on|off} command of the \CPK{}
(\pxref{OPRS Kernel Meta Level Option Commands}).

\item[Post Meta Fact: (SOAK ...)] Turn on or off the posting of the
\code{(SOAK)} meta fact. This command is equivalent to the \code{set soak
on|off} command of the \CPK{} (\pxref{OPRS Kernel Meta Level Option Commands}).

\item[Post Meta Fact: (FACT-INVOKED-OPS ...)] Turn on or off the
posting of the \code{(FACT-INVOKED-OPS)} meta fact. This command is equivalent
to the \code{set meta fact on|off} command of the \CPK{} (\pxref{OPRS Kernel Meta Level Option Commands}).

\item[Post Meta Fact: (GOAL-INVOKED-OPS ...)] Turn on or off the
posting of the \code{(GOAL-INVOKED-OPS)} meta fact. This command is equivalent
to the \code{set meta goal on|off} command of the \CPK{} (\pxref{OPRS Kernel Meta Level Option Commands}).

\item[Post Meta Fact: (APPLICABLE-OPS-FACT ...)] Turn on or off the
posting of the \code{(APPLICABLE-OPS-FACT)} meta fact. This command is
equivalent to the \code{set meta fact op on|off} command of the \CPK{}
(\pxref{OPRS Kernel Meta Level Option Commands}).

\item[Post Meta Fact: (APPLICABLE-OPS-GOAL ...)] Turn on or off the
posting of the \code{(APPLICABLE-OPS-GOAL)} meta fact. This command is
equivalent to the \code{set meta goal op on|off} command of the \CPK{}
(\pxref{OPRS Kernel Meta Level Option Commands}).

\end{description}

\subsection{Display Menu}
\node{Display Menu}
\cpindex{Display Menu}

\figuregif[scale=0.5]{xoprs-display-menu}{\XOPRS{} Display Menu}{xp-display-menu}

This menu (Figure \ref{xp-display-menu}) contains the following items.



\subsubsection{Display a Particular OP}
\node{Display a Particular OP}
\cpindex{Display a Particular OP}

This command can be used to display a particular OP on the screen.

\subsubsection{Display Previous OP}
\node{Display Previous OP}
\cpindex{Display Previous OP}

This command can be used to display the previous OP on the screen.

\subsubsection{Display Next OP}
\node{Display Next OP}
\cpindex{Display Next OP}

This command can be used to display the next OP on the screen.

\subsubsection{Clear Text Pane}
\node{Clear Text Pane}
\cpindex{Clear Text Pane}

Clear the text pane.

\subsubsection{Clear OP Pane}
\node{Clear OP Pane}
\cpindex{Clear OP Pane}

Clear the OP pane.

\subsubsection{Clear Intention Graph Pane}
\node{Clear Intention Graph Pane}
\cpindex{Clear Intention Graph Pane}

Clear the intention graph pane.

\subsubsection{Change Size Text Pane}
\node{Change Size Text Pane}
\cpindex{Change Size Text Pane}

This command can be used to change the size of the scrollable area of the Text
pane.

\subsection{\XOPRS{} Help Menu}
\node{X-OPRS Help Menu}
\cpindex{X-OPRS Help Menu}

\figuregif[scale=0.5]{xoprs-help-menu}{\XOPRS{} Help Menu}{xp-help-menu}

The help menu (Figure \ref{xp-help-menu}) contains a number of items. The
first one, when selected, pops up the documentation. The other items have
the name of the menu in the menu bar. They points to the respective
documentation section.

\section{Control and Status Panel}
\node{Control and Status Panel}
\cpindex{Control and Status Panel}

\figuregif[scale=0.5]{xoprs-ctl-panel}{The Control and Status Panel}{xp-ctl-panel}

The Control and Status Panel (Figure \ref{xp-ctl-panel}) is divided in 2 parts,
the Status Panel and the Control Button Menu. The first one indicates the
current status of the kernel, and the second one allows the user to control its
execution.



\subsection{Status Panel}
\node{Status Panel}
\cpindex{Status Panel}

At all time, the status panel tells the user what is the status of the
\XPK{}. The status is updated from time to time by the \XOPRS{}
kernel (every tenth of a second or so). These buttons and the state they
represent are not exclusive, therefore more than one of these buttons can
be ON at the same time.

\begin{description}

\item[Idle] When this button is ON, it means that there was no new goal
nor new fact in the current loop of the kernel. This button sometimes
blink off while the kernel is running because indeed, you can have
sometime, a loop without new goal or new fact.

\item[Stopped] When this button is ON, it means that the \XPK{}
has been stopped by the user (using the step, next or halt command).

\item[Active] This button is ON when there is ``something to do''.

\end{description}

\subsection{Control Button Menu}
\node{Control Button Menu}
\cpindex{Control Button Menu}

To some extend, the user can control the execution of the \XPK{} by using the
button of the Control Panel. To activate a command is just a matter of clicking
on the appropriate button.  These commands are equivalent to the command
presented in \xref{OPRS Kernel Status and Control Commands}.

\begin{description}

\item[Halt] Click on this button to stop the execution of the \XOPRS{}
kernel. While the kernel is halted, you can perform most command, such as
consulting the fact or OP Library, adding new fact or new goal (in which
case they will be taken into account whenever the kernel is restarted),
displaying a particular OP, load new OPs, etc.

\item[Run] Click on this button to restart a stopped \XPK{}.

\item[Step] Click on this button to step through one loop of the \XOPRS{}
kernel. Note that one loop execution does not always produce any
noticeable or visible effect\dots{}.

\item[Next] Click on this button to run the kernel until the control hits
an edge of a step trace OP. This is very useful when you graphic trace OPs.  At
each click, the execution goes from one traced edge to the next traced edge
(whatever execution happens in between).

\item[Reset] Click on this button to reset the kernel. This command is
equivalent to the \code{reset kernel} command of the \CPK{}
(\pxref{OPRS Kernel Status and Control Commands}).

\end{description}


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "oprs"
%%% End: 
