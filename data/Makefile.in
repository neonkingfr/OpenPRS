########################### -*- Mode: Makefile -*- #########################
# Makefile -- 
#
# $Id$
# 
# Copyright (c) 1991-2005 Francois Felix Ingrand.
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#
#    - Redistributions of source code must retain the above copyright
#      notice, this list of conditions and the following disclaimer.
#    - Redistributions in binary form must reproduce the above
#      copyright notice, this list of conditions and the following
#      disclaimer in the documentation and/or other materials provided
#      with the distribution.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
# COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
# CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
# ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
# POSSIBILITY OF SUCH DAMAGE.
###############################################################################

#
# the file site.make is a link to a file containing machine/site dependencies.
#


include ../site.make

top_srcdir=	@top_srcdir@

srcdir=	@srcdir@

.PHONY:	all index

VPATH = .:$(srcdir)

LEAK_FILES = leak.inc leak1.inc leak10.inc leak2.inc leak3.inc leak4.inc leak5.inc leak6.inc leak7.inc \
		leak8.inc leak9.inc


OPF_FILES = example-cons.opf meta-intended-goal.opf example-list.opf \
	bar.opf new-default.opf meta-selector.opf \
	new-meta-ops.opf boo.opf com.opf \
	conway.opf common-meta-processes.opf \
	fact-meta.opf fib.opf foo.opf \
	fact-meta-if-par.opf fib-par.opf ipp.opf\
	fact-text.opf fib-text.opf semaphore.opf mini-default.opf

INC_FILES = example-list.inc include.inc bar.inc boo.inc database-cwp.inc \
	database-ep.inc database-ff.inc \
	fact-meta.inc fib.inc unification.inc \
	foo.inc fact-meta-if-par.inc fib-par.inc ipp.inc\
	fact-text.inc new-default.inc semaphore.inc mini-default.inc

GGRAPH_FILES = 

SYM_FILES = meta-intended-goal.sym new-default.sym semaphore.sym \
	mini-default.sym common-meta-processes.sym opc-declaration.sym

DB_FILES = include.db

OPF_TEST_FILES = test/bind.opf test/effects.opf test/empty.opf \
	test/fail.opf test/meta-fact-goal.opf \
	test/maint.opf test/all.opf test/array.opf \
	test/boundp.opf test/car-cdr.opf test/command.opf \
	test/copy-env.opf test/current.opf test/error.opf test/foo.opf \
	test/goal-old.opf test/goal.opf test/intention.opf test/mtime.opf \
	test/mult-var.opf test/prop.opf test/read.opf test/test.opf test/wait.opf \
	test/ff-val.opf test/cons-term.opf test/del-ll.opf test/special.opf \
	test/critical.opf test/text-opf-torture.opf test/append.opf \
	test/semaphore.opf

INC_TEST_FILES = test/empty.inc test/database.inc test/all.inc \
	test/array.inc test/bind.inc test/boundp.inc test/car-cdr.inc \
	test/copy-env.inc test/current.inc test/failed.inc test/goal.inc \
	test/intention.inc test/maint.inc test/read.inc \
	test/wait.inc test/ff-val.inc test/cons-term.inc \
	test/del-ll.inc test/special.inc test/critical.inc \
	test/text-opf-torture.inc test/semaphore.inc test/meta-fact-goal.inc test/ipp-test.inc

DB_TEST_FILES = test/bind.db test/maint.db test/ipp-test.db

INSTALL_DATA_FILES = $(SYM_FILES) $(INC_FILES) $(OPF_FILES) $(DB_FILES)

INSTALL_TEST_FILES = $(INC_TEST_FILES) $(OPF_TEST_FILES) $(DB_TEST_FILES)

all:

install:: $(INSTALL_DATA_FILES) 
	for i in $^ ; do\
		$(INSTALL-IF-CHANGE) -c -m 644 $$i ${DATADIR}/`basename $$i`;\
	done

install::  $(INSTALL_TEST_FILES)
	for i in $^ ; do\
		$(INSTALL-IF-CHANGE) -c -m 644 $$i ${DATADIR}/test/`basename $$i`;\
	done

